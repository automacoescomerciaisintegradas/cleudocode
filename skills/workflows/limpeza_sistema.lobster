name: "Limpeza de Arquivos TemporÃ¡rios"
description: "Remove arquivos temporÃ¡rios e cache para liberar espaÃ§o"
version: "1.0"
author: "Cleudocode Team"

steps:
  - name: "Verificar espaÃ§o em disco antes"
    skill: "shell"
    action: "execute"
    params:
      command: "wmic logicaldisk get size,freespace,caption"
    continue_on_error: true
    
  - name: "Limpar cache Python"
    skill: "shell"
    action: "execute"
    params:
      command: "del /s /q __pycache__ *.pyc *.pyo"
    continue_on_error: true
    
  - name: "Limpar logs antigos"
    skill: "shell"
    action: "execute"
    params:
      command: "forfiles /p logs /s /m *.log /d -7 /c \"cmd /c del @path\""
    continue_on_error: true
    
  - name: "Limpar arquivos temporÃ¡rios"
    skill: "shell"
    action: "execute"
    params:
      command: "del /s /q temp\\*.* test_lobster_output\\*.*"
    continue_on_error: true
    
  - name: "Verificar espaÃ§o em disco depois"
    skill: "shell"
    action: "execute"
    params:
      command: "wmic logicaldisk get size,freespace,caption"
    continue_on_error: true
    
  - name: "Criar relatÃ³rio de limpeza"
    skill: "filesystem"
    action: "write_file"
    params:
      filepath: "reports/limpeza_{{ date }}.txt"
      content: |
        ===================================
        RELATÃ“RIO DE LIMPEZA
        ===================================
        
        Data: {{ datetime }}
        
        ANTES:
        {{ step_0_result.stdout }}
        
        DEPOIS:
        {{ step_4_result.stdout }}
        
        AÃ‡Ã•ES REALIZADAS:
        âœ“ Cache Python removido
        âœ“ Logs antigos (>7 dias) removidos
        âœ“ Arquivos temporÃ¡rios removidos
        
        ===================================
      overwrite: true
    
  - name: "Notificar conclusÃ£o"
    skill: "telegram"
    action: "send_message"
    params:
      message: |
        ðŸ§¹ Limpeza ConcluÃ­da!
        
        ðŸ“… Data: {{ datetime }}
        ðŸ“„ RelatÃ³rio: reports/limpeza_{{ date }}.txt
        
        âœ“ Cache Python removido
        âœ“ Logs antigos removidos
        âœ“ Arquivos temporÃ¡rios removidos
